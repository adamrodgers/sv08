[neopixel panel_ring]
pin: PB10
chain_count: 12
color_order: GRBW
initial_RED: 0.0
initial_GREEN: 0.0
initial_BLUE: 0.0
initial_WHITE: 0.0

[gcode_macro TEST_RING_HARDWARE]
description: Test each LED individually to find bad LEDs
gcode:
    RESPOND MSG="Testing all LEDs OFF"
    SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0 WHITE=0
    G4 P1000
    
    {% for i in range(1, 13) %}
        RESPOND MSG="Testing LED {i} - RED"
        SET_LED LED=panel_ring RED=0.25 GREEN=0 BLUE=0 WHITE=0 INDEX={i}
        G4 P500
        SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0 WHITE=0 INDEX={i}
        G4 P200
    {% endfor %}
    
    RESPOND MSG="Test complete - all 12 should have lit RED"
    SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0 WHITE=0

[gcode_macro TEST_RING_COLORS]
description: Test if color order is correct
gcode:
    RESPOND MSG="Testing RED - should show RED"
    SET_LED LED=panel_ring RED=0.25 GREEN=0 BLUE=0 WHITE=0
    G4 P2000
    
    RESPOND MSG="Testing GREEN - should show GREEN"
    SET_LED LED=panel_ring RED=0 GREEN=0.25 BLUE=0 WHITE=0
    G4 P2000
    
    RESPOND MSG="Testing BLUE - should show BLUE"
    SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0.25 WHITE=0
    G4 P2000
    
    RESPOND MSG="Testing WHITE channel"
    SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0 WHITE=0.25
    G4 P2000
    
    RESPOND MSG="All OFF"
    SET_LED LED=panel_ring RED=0 GREEN=0 BLUE=0 WHITE=0

[led_effect ring_idle]
autostart: true
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    breathing 10 1 top (0.15, 0.05, 0.2)

[led_effect ring_bed_heater]
autostart: false
frame_rate: 24
heater: heater_bed
leds:
    neopixel:panel_ring
layers:
    heater 40 1 top (0.25, 0.0, 0.0),(0.25, 0.125, 0.0),(0.25, 0.25, 0.0)

[led_effect ring_ready]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    breathing 3 0 top (0.0, 0.15, 0.05)

[led_effect ring_busy]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    breathing 2 0 top (0.1, 0.0, 0.0)

[led_effect ring_heating]
autostart: false
frame_rate: 24
heater: extruder
leds:
    neopixel:panel_ring
layers:
    heater 40 0 top (0.25, 0.0, 0.0),(0.25, 0.125, 0.0),(0.25, 0.25, 0.0)
    comet 1.5 1.5 add (0.25, 0.05, 0.0)

[led_effect ring_chamber_heating]
autostart: false
frame_rate: 24
heater: temperature_sensor chamber
leds:
    neopixel:panel_ring
layers:
    temperature 15 45 top (0.0, 0.025, 0.125),(0.0, 0.075, 0.175),(0.125, 0.125, 0.0),(0.25, 0.125, 0.0),(0.25, 0.05, 0.0),(0.25, 0.0, 0.0)

[led_effect ring_printing_progress]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    progress -1 0 add (0.0, 0.075, 0.15),(0.0, 0.15, 0.25)
    twinkle 4 0.1 top (0.25, 0.25, 0.25)

[led_effect ring_homing]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    comet 1 1 top (0.0, 0.25, 0.05),(0.0, 0.15, 0.025),(0.0, 0.075, 0.0125)

[led_effect ring_leveling]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    breathing 2.5 0 top (0.125, 0.025, 0.1)

[led_effect ring_meshing]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    chase 1.2 1.5 top (0.05, 0.25, 0.0),(0.025, 0.15, 0.0),(0.0125, 0.075, 0.0)

[led_effect ring_cleaning]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    gradient -1 2 top (0.0, 0.005, 0.125),(0.0, 0.025, 0.2),(0.0, 0.005, 0.125)

[led_effect ring_error]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    strobe 2 1.5 top (0.25, 0.0, 0.0)

[led_effect ring_paused]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    blink 1 0.5 top (0.25, 0.25, 0.0)

[led_effect ring_completed]
autostart: false
frame_rate: 24
run_on_error: false
leds:
    neopixel:panel_ring
layers:
    chase 0.5 1.5 add (0.0, 0.25, 0.0),(0.15, 0.25, 0.0),(0.25, 0.25, 0.0)
    breathing 3 0 top (0.0, 0.15, 0.0)

[led_effect ring_standby]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    breathing 5 0 top (0.0125, 0.0125, 0.0125)

[led_effect ring_off]
autostart: false
frame_rate: 24
leds:
    neopixel:panel_ring
layers:
    static 0 0 top (0.0, 0.0, 0.0)

[gcode_macro _RING_READY]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_ready

[gcode_macro _RING_IDLE]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_idle

[gcode_macro _RING_BUSY]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_busy

[gcode_macro _RING_HEATING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_heating

[gcode_macro _RING_PRINTING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_printing_progress

[gcode_macro _RING_HOMING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_homing

[gcode_macro _RING_LEVELING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_leveling

[gcode_macro _RING_MESHING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_meshing

[gcode_macro _RING_CLEANING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_cleaning

[gcode_macro _RING_ERROR]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_error

[gcode_macro _RING_PAUSED]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_paused

[gcode_macro _RING_COMPLETED]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_completed

[gcode_macro _RING_STANDBY]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_standby

[gcode_macro _RING_CHAMBER_HEATING]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_chamber_heating

[gcode_macro _RING_OFF]
gcode:
    STOP_LED_EFFECTS LEDS="neopixel:panel_ring"
    SET_LED_EFFECT EFFECT=ring_off